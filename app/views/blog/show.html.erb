<div class="h-full bg-background text-foreground transition-colors duration-300">

  <div class="max-w-[1400px] mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">

      <!-- TOC Sidebar -->
      <aside class="hidden lg:block lg:col-span-3 relative">
        <div class="sticky top-24 transition-all duration-300">
          <h3 class="text-sm font-bold text-foreground mb-4 uppercase tracking-wide">Contents</h3>

          <nav class="toc-nav">
            <ul class="space-y-1">
              <% @post.toc.each do |item| %>
              <li>
                <a href="#<%= item['id'] %>" class="block py-1.5 text-sm text-muted-foreground hover:text-foreground transition-colors duration-200 border-l-2 border-transparent hover:border-primary pl-4
                            <%= 'ml-4' if item['level'] == 3 %>">
                  <%= item['text'] %>
                </a>
              </li>
              <% end %>
            </ul>
          </nav>
        </div>
      </aside>

      <!-- Main Content -->
      <article class="lg:col-span-8 lg:col-start-4">
        <!-- Tags -->
        <div class="flex flex-wrap gap-2 mb-6">
          <% @post.tags.each do |tag| %>
          <span class="px-3 py-1 rounded-full text-xs font-medium bg-secondary text-secondary-foreground border border-border">
            <%= tag %>
          </span>
          <% end %>
        </div>

        <!-- Title -->
        <h1 class="text-3xl md:text-5xl font-bold text-foreground mb-6 leading-tight tracking-tight">
          <%= @post.title %>
        </h1>

        <!-- Info -->
        <div class="flex items-center text-sm text-muted-foreground mb-12 pb-8 border-b border-border font-mono">
          <div class="flex items-center mr-8">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            <span>Hyunchul Cho</span>
          </div>
          <div class="flex items-center">
            <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
            </svg>
            <span><%= @post.published_date.strftime("%B %-d, %Y") rescue @post.published_date %></span>
          </div>
        </div>

        <!-- Content Body -->
        <div class="prose dark:prose-invert prose-lg max-w-none 
                    text-foreground
                    prose-headings:text-foreground 
                    prose-p:text-muted-foreground
                    prose-li:text-muted-foreground
                    prose-strong:text-foreground
                    prose-a:text-primary 
                    prose-code:text-foreground 
                    prose-pre:bg-muted 
                    prose-pre:text-foreground
                    prose-pre:border prose-pre:border-border">
          <%= raw @post.content %>
        </div>
      </article>

    </div>
  </div>
</div>

<style>
  /* Custom Scrollbar for TOC if needed, though usually hidden is fine */
  html {
    scroll-behavior: smooth;
  }
</style>